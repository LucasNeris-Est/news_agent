version: '3.8'

services:

  api:
    build: .
    container_name: news_agent_api
    ports:
      - "8000:8000"
    environment:
      - GOOGLE_API_KEY=${GOOGLE_API_KEY}
      # Strings de conexão PostgreSQL (configure no .env ou aqui)
      # Se o PostgreSQL estiver na mesma rede Docker, use o nome do serviço como hostname
      # Se estiver fora do Docker, use localhost ou IP do host
      - POSTGRES_VECTOR_DB_CONNECTION_STRING=${POSTGRES_VECTOR_DB_CONNECTION_STRING}
      - POSTGRES_CACHE_DB_CONNECTION_STRING=${POSTGRES_CACHE_DB_CONNECTION_STRING}
      - LLM_MODEL=${LLM_MODEL:-gemini-2.5-flash}
      - EMBEDDING_MODEL=${EMBEDDING_MODEL:-BAAI/bge-m3}
    restart: unless-stopped
    networks:
      - news_agent_network

networks:
  news_agent_network:
    external: true

